<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:sec="http://www.springframework.org/security/tags">
      
   
<h:head>
    <title>Welcome</title>
    <link rel="stylesheet" href="../css/default.css" type="text/css" />
</h:head>

<h:body>
    <ui:composition template="../template/template.xhtml">
		<ui:define name="content">
    <sec:authorize hasAnyRole='ROLE_ADMIN'>
    <h:form id="form2">
                <p:commandButton id="addUser" value="Dodaj" action="#{animalMB.addAnimal}"/>
                <p:commandButton id="reset" value="Wyczyść" type="reset" />
    </h:form>
    </sec:authorize>
  
    <br/>
 
    <h:form id="form1">
        <p:growl id="messages" showDetail="true"/>
        <p:dataTable id="animals" var="animal" value="#{animalMB.animalList}" style="width:20%" editable="true">  
            <p:ajax event="rowEdit" listener="#{animalMB.onEdit}" update=":form1:messages"/>
            <p:ajax event="rowEditCancel" listener="#{animalMB.onCancel}" update=":form1:messages"/>             
            <p:column headerText="Name">
                <f:facet name="header">
                    <h:outputText value="Name"/>
                </f:facet>
                <p:cellEditor>
                      <f:facet name="output">
                        <h:outputText value="#{animal.animalName}"/>
                    </f:facet>
                    <f:facet name="input">
                           <p:inputText value="#{animal.animalName}" label="name"/>
                    </f:facet>             
                </p:cellEditor>
            </p:column>
            <sec:authorize access="hasAnyRole('ROLE_ADMIN')">         
            <p:column>
                <f:facet name="header">Delete</f:facet>
                <h:commandLink value="Delete" action="#{AnimalMB.deleteAnimal(animal)}"/>
            </p:column>
            <p:column style="width:25%">
                <f:facet name="header">Update</f:facet>
                <p:rowEditor/>
            </p:column>           
               </sec:authorize>           
        </p:dataTable>
        <br/>
    </h:form>
    		</ui:define>
    </ui:composition>
</h:body>

</html>