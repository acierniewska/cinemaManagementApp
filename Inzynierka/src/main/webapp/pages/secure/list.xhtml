<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:sec="http://www.springframework.org/security/tags">
      
   
<h:head>
    <title>Welcome</title>
    <link rel="stylesheet" href="../css/default.css" type="text/css" />
</h:head>

<h:body>
    <ui:composition template="../template/template.xhtml">
		<ui:define name="content">
		
		<h:form id="mainForm">
			<p:dialog widgetVar="addDialog" header="Edytuj zwierzę" showEffect="clip" hideEffect="clip">
				<h:panelGrid id="dialogDetail" columns="2" style="text-align:left">
            			<h:outputText value="Imię:"/>
            			<h:inputText value="#{animalMB.selectedAnimal.animalName}"/>
            			
            			<h:outputText value="Specjalnej troski:"/>
					    <p:selectBooleanCheckbox value="#{animalMB.selectedAnimal.isHandicapte}"/>
					    
					    <h:outputText value="Gatunek:"/>
            			<p:selectOneMenu id="speciesSelect" value="#{animalMB.selectedAnimal.breed.species.speciesId}"  effect="fade" filter="true"  filterMatchMode="startsWith">
					     	<f:selectItems value="#{speciesMB.speciesList}" var="species" itemLabel="#{species.speciesName}" itemValue="#{species.speciesId}"/>
					    </p:selectOneMenu>
					    
					    
            			<!-- dodać selectonemenu -->
            			<h:outputText value="Rasa:"/>
            			<p:selectOneMenu id="breedSelect" value="#{animalMB.selectedAnimal.breed.breedId}"  effect="fade" filter="true"  filterMatchMode="startsWith">
					     	<f:selectItems value="#{breedMB.getBreedListForSpecies(species.speciesId)}" var="breed" itemLabel="#{breed.breedName}" itemValue="#{breed.breedId}"/>
					    </p:selectOneMenu>
            			
            			
            			<!-- TU KONIEC -->
            			
            			<h:outputText value="Kolor futra:"/>
            			<p:selectOneMenu id="furColourSelect" value="#{animalMB.selectedAnimal.fur.furColour}"  effect="fade" filter="true"  filterMatchMode="startsWith">
					     	<f:selectItems value="#{furEB.colours}" var="fur" itemLabel="#{FurEnumBean.getColour(fur.intValue)}" itemValue="#{fur.intValue}"/>
					    </p:selectOneMenu>
					    
					    <h:outputText value="Długość futra:"/>
					    <p:selectOneMenu id="furLengthSelect" value="#{animalMB.selectedAnimal.fur.furLength}"  effect="fade" filter="true"  filterMatchMode="startsWith">
					     	<f:selectItems value="#{furEB.lengths}" var="fur" itemLabel="#{FurEnumBean.getLength(fur.intValue)}" itemValue="#{fur.intValue}"/>
					    </p:selectOneMenu>
            			
            			<h:outputText value="Data urodzenia:"/>
            			<p:calendar value="#{animalMB.selectedAnimal.animalBirthdayDay}" pattern="yyyy-MM-dd" mask="true" showOn="button"/>
				 
				 		<h:outputText value="Pod opieką Fundacji od:"/>
				        <p:calendar value="#{animalMB.selectedAnimal.animalRescueDate}" pattern="yyyy-MM-dd" mask="true" showOn="button"/>
            			
            			<h:outputText value="Osoba:" title="Właściciel zwierzęcia, osoba prowadząca Dom Tymczasowy lub osoba adoptująca wirtualnie"/>
            			<p:selectOneMenu id="personSelect" value="#{animalMB.selectedAnimal.person.personId}"  effect="fade" filter="true"  filterMatchMode="startsWith">
					     	<f:selectItem itemLabel="(puste)" itemValue=""/>
					     	<f:selectItems value="#{personMB.personList}" var="person" itemLabel="#{person.personName} #{person.surname}" itemValue="#{person.personId}"/>
					    </p:selectOneMenu>
					    
					    <h:outputText value="Azyl:" title="Właściciel zwierzęcia, osoba prowadząca Dom Tymczasowy lub osoba adoptująca wirtualnie"/>
            			<p:selectOneMenu id="asyliumSelect" value="#{animalMB.selectedAnimal.asylium.asyliumId}"  effect="fade" filter="true"  filterMatchMode="startsWith">
					     	<f:selectItem itemLabel="(puste)" itemValue=""/>
					     	<f:selectItems value="#{asyliumMB.asyliumList}" var="asylium" itemLabel="#{asylium.name}" itemValue="#{asylium.asyliumId}"/>
					    </p:selectOneMenu>
					    
					    <h:outputText value="Przytulisko:" title="Właściciel zwierzęcia, osoba prowadząca Dom Tymczasowy lub osoba adoptująca wirtualnie"/>
            			<p:selectOneMenu id="animalRepo" value="#{animalMB.selectedAnimal.animalRepo.animalRepoId}"  effect="fade" filter="true"  filterMatchMode="startsWith">
					     	<f:selectItem itemLabel="(puste)" itemValue=""/>
					     	<f:selectItems value="#{animalRepoMB.animalRepoList}" var="animalRepo" itemLabel="#{animalRepo.name}" itemValue="#{animalRepo.animalRepoId}"/>
					    </p:selectOneMenu>
					    
					    <h:outputText value="W Domu Tymczasowym:"/>
					    <p:selectBooleanCheckbox value="#{animalMB.selectedAnimal.isInTempHouse}" disabled="#{animalMB.selectedAnimal.person == null}" />
					    
					    <h:outputText value="Zaadoptowany:"/>
					    <p:selectBooleanCheckbox value="#{animalMB.selectedAnimal.isAdopted}" disabled="#{animalMB.selectedAnimal.person == null}" />
					    
					    <h:outputText value="Zaadoptowany wirtualnie:"/>
					    <p:selectBooleanCheckbox value="#{animalMB.selectedAnimal.isVirtualAdopted}" disabled="#{animalMB.selectedAnimal.person == null}" />
					    
			</h:panelGrid>
			
		</p:dialog> 
		
		<!-- Buttony -->
		<h:panelGrid id="buttons" columns="3" style="text-align:left;margin-bottom:10px">
			<p:commandButton id="add" update="animals" title="Dodaj pozycję" ajax="true" icon="ui-icon-plusthick" onclick="PF('addDialog').show();"/>
			<p:commandButton id="modify" update="animals" title="Modyfikuj zaznaczoną pozycję" ajax="true" icon="ui-icon-pencil" disabled="#{animalMB.selectedAnimal == null}"/>
			<p:commandButton id="delete" update="animals" title="Usuń zaznaczoną pozycję" ajax="true" icon="ui-icon-minusthick" disabled="#{animalMB.selectedAnimal == null}"/>
		</h:panelGrid>
		
		<!-- TABELA -->
        <p:dataTable  widhetVar="animalTable" id="animals"  selectionMode="single" selection="#{animalMB.selectedAnimal}" dblClickSelect="true"  onRowDblselectComplete="addDialog.show()"
       					var="animal" rowKey="#{animal.animalName}" value="#{animalMB.animalList}" editable="true"
       					paginator="true" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}" rows="10">  
            <p:ajax event="rowSelect" listener="#{animalMB.onCompRowSelect}" update=":mainForm:buttons, :mainForm:dialogDetail"/> 
            <p:ajax event="rowUnselect" listener="#{animalMB.onUserRowUnselect}" update=":mainForm:buttons"/>
           	<p:ajax event="rowDblselect" immediate="true" process="@this" oncomplete="PF('addDialog').show()" />
            <p:column headerText="Imię">
                   <h:outputText value="#{animal.animalName}"/>
            </p:column>
            <p:column headerText="Gatunek">
                   <h:outputText value="#{animal.breed.species.speciesName}"/>
            </p:column>
            <p:column headerText="Specjalnej troski">
		        <p:graphicImage value="../pic/ok.png" rendered="#{animal.isHandicapte}"/>
   				<p:graphicImage value="../pic/nope.png"  rendered="#{not animal.isHandicapte}"/>
		    </p:column>
            <p:column headerText="Azyl">
            	<h:outputText value="#{animal.asylium.asyliumName}"/>
   				<p:graphicImage value="../pic/nope.png"  rendered="#{not animal.asylium.asyliumName.isEmpty()}"/>
		    </p:column>
		    <p:column headerText="Przytułek">
		        <h:outputText value="#{animal.animalRepo.animalRepoName}"/>
   				<p:graphicImage value="../pic/nope.png"  rendered="#{not animal.animalRepo.animalRepoName.isEmpty()}"/>
		    </p:column>
		    <p:column headerText="Osoba">
		        <h:outputText value="#{animal.person.personName} #{animal.person.surname}" />
		    </p:column>
		     <p:column headerText="Dom Tymczasowy">
		    	<p:graphicImage value="../pic/ok.png" rendered="#{animal.isInTempHouse}"/>
   				<p:graphicImage value="../pic/nope.png"  rendered=" not #{animal.isInTempHouse}"/>
   			</p:column>
		    <p:column headerText="Zaadoptowany">
		    	<p:graphicImage value="../pic/ok.png" rendered="#{animal.isAdopted}"/>
   				<p:graphicImage value="../pic/nope.png"  rendered="#{not animal.isAdopted}"/>
		    </p:column>
		    <p:column headerText="Zaadoptowany wirtualnie">
		    	<p:graphicImage value="../pic/ok.png" rendered="#{animal.isVirtualAdopted}"/>
   				<p:graphicImage value="../pic/nope.png"  rendered="#{not animal.isVirtualAdopted}"/>
		    </p:column>
        </p:dataTable>
        
        </h:form>
        
        </ui:define>
    </ui:composition>
</h:body>
</html>

		
            			<!-- 
            			<h:outputText value="Kolor futra"/>
						<p:selectOneMenu id="furColourSelect" value="#{furEnumBean.colours}" var="furC" itemLabel="#{furC.colour}">
							<f:selectItems value="#{furEnumBean.colours}" var="furCol" itemLabel="#{furCol.name}" itemValue="#{furCol}"/>
							<p:column>
								<h:outputText value="#{furC.name}" />
							</p:column>
						</p:selectOneMenu>
						 -->      